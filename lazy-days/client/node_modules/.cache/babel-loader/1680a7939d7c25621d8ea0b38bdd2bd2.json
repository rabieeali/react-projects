{"ast":null,"code":"import { __assign } from 'tslib';\nimport { Presence } from '../types.js';\nimport { elementDragControls } from '../../../gestures/drag/VisualElementDragControls.js';\nimport { createCrossfader } from './crossfader.js';\nfunction layoutStack() {\n  var stack = new Set();\n  var state = {\n    leadIsExiting: false\n  };\n  var prevState = __assign({}, state);\n  var prevValues;\n  var prevViewportBox;\n  var prevDragCursor;\n  var crossfader = createCrossfader();\n  var needsCrossfadeAnimation = false;\n  function getFollowViewportBox() {\n    return state.follow ? state.follow.prevViewportBox : prevViewportBox;\n  }\n  function getFollowLayout() {\n    var _a;\n    return (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getLayoutState().layout;\n  }\n  return {\n    add: function (element) {\n      element.setCrossfader(crossfader);\n      stack.add(element);\n      /**\n       * Hydrate new element with previous drag position if we have one\n       */\n      if (prevDragCursor) element.prevDragCursor = prevDragCursor;\n      if (!state.lead) state.lead = element;\n    },\n    remove: function (element) {\n      stack.delete(element);\n    },\n    getLead: function () {\n      return state.lead;\n    },\n    updateSnapshot: function () {\n      if (!state.lead) return;\n      prevValues = crossfader.isActive() ? crossfader.getLatestValues() : state.lead.getLatestValues();\n      prevViewportBox = state.lead.prevViewportBox;\n      var dragControls = elementDragControls.get(state.lead);\n      if (dragControls && dragControls.isDragging) {\n        prevDragCursor = dragControls.cursorProgress;\n      }\n    },\n    clearSnapshot: function () {\n      prevDragCursor = prevViewportBox = undefined;\n    },\n    updateLeadAndFollow: function () {\n      var _a;\n      prevState = __assign({}, state);\n      var lead;\n      var follow;\n      var order = Array.from(stack);\n      for (var i = order.length; i--; i >= 0) {\n        var element = order[i];\n        if (lead) follow !== null && follow !== void 0 ? follow : follow = element;\n        lead !== null && lead !== void 0 ? lead : lead = element;\n        if (lead && follow) break;\n      }\n      state.lead = lead;\n      state.follow = follow;\n      state.leadIsExiting = ((_a = state.lead) === null || _a === void 0 ? void 0 : _a.presence) === Presence.Exiting;\n      crossfader.setOptions({\n        lead: lead,\n        follow: follow,\n        prevValues: prevValues,\n        crossfadeOpacity: (follow === null || follow === void 0 ? void 0 : follow.isPresenceRoot) || (lead === null || lead === void 0 ? void 0 : lead.isPresenceRoot)\n      });\n      if (prevState.lead !== state.lead || prevState.leadIsExiting !== state.leadIsExiting) {\n        needsCrossfadeAnimation = true;\n      }\n    },\n    animate: function (child, shouldCrossfade) {\n      if (shouldCrossfade === void 0) {\n        shouldCrossfade = false;\n      }\n      if (child === state.lead) {\n        if (shouldCrossfade) {\n          /**\n           * Point a lead to itself in case it was previously pointing\n           * to a different visual element\n           */\n          child.pointTo(state.lead);\n        } else {\n          child.setVisibility(true);\n        }\n        var config = {};\n        if (child.presence === Presence.Entering) {\n          config.originBox = getFollowViewportBox();\n        } else if (child.presence === Presence.Exiting) {\n          config.targetBox = getFollowLayout();\n        }\n        if (needsCrossfadeAnimation) {\n          needsCrossfadeAnimation = false;\n          var transition = child.getDefaultTransition();\n          child.presence === Presence.Entering ? crossfader.toLead(transition) : crossfader.fromLead(transition);\n        }\n        child.notifyLayoutReady(config);\n      } else {\n        if (shouldCrossfade) {\n          state.lead && child.pointTo(state.lead);\n        } else {\n          child.setVisibility(false);\n        }\n      }\n    }\n  };\n}\nexport { layoutStack };","map":{"version":3,"names":["__assign","Presence","elementDragControls","createCrossfader","layoutStack","stack","Set","state","leadIsExiting","prevState","prevValues","prevViewportBox","prevDragCursor","crossfader","needsCrossfadeAnimation","getFollowViewportBox","follow","getFollowLayout","_a","getLayoutState","layout","add","element","setCrossfader","lead","remove","delete","getLead","updateSnapshot","isActive","getLatestValues","dragControls","get","isDragging","cursorProgress","clearSnapshot","undefined","updateLeadAndFollow","order","Array","from","i","length","presence","Exiting","setOptions","crossfadeOpacity","isPresenceRoot","animate","child","shouldCrossfade","pointTo","setVisibility","config","Entering","originBox","targetBox","transition","getDefaultTransition","toLead","fromLead","notifyLayoutReady"],"sources":["/home/pc/Desktop/react-projects/react-projects/lazy-days/client/node_modules/framer-motion/dist/es/components/AnimateSharedLayout/utils/stack.js"],"sourcesContent":["import { __assign } from 'tslib';\nimport { Presence } from '../types.js';\nimport { elementDragControls } from '../../../gestures/drag/VisualElementDragControls.js';\nimport { createCrossfader } from './crossfader.js';\n\nfunction layoutStack() {\n    var stack = new Set();\n    var state = { leadIsExiting: false };\n    var prevState = __assign({}, state);\n    var prevValues;\n    var prevViewportBox;\n    var prevDragCursor;\n    var crossfader = createCrossfader();\n    var needsCrossfadeAnimation = false;\n    function getFollowViewportBox() {\n        return state.follow ? state.follow.prevViewportBox : prevViewportBox;\n    }\n    function getFollowLayout() {\n        var _a;\n        return (_a = state.follow) === null || _a === void 0 ? void 0 : _a.getLayoutState().layout;\n    }\n    return {\n        add: function (element) {\n            element.setCrossfader(crossfader);\n            stack.add(element);\n            /**\n             * Hydrate new element with previous drag position if we have one\n             */\n            if (prevDragCursor)\n                element.prevDragCursor = prevDragCursor;\n            if (!state.lead)\n                state.lead = element;\n        },\n        remove: function (element) {\n            stack.delete(element);\n        },\n        getLead: function () { return state.lead; },\n        updateSnapshot: function () {\n            if (!state.lead)\n                return;\n            prevValues = crossfader.isActive()\n                ? crossfader.getLatestValues()\n                : state.lead.getLatestValues();\n            prevViewportBox = state.lead.prevViewportBox;\n            var dragControls = elementDragControls.get(state.lead);\n            if (dragControls && dragControls.isDragging) {\n                prevDragCursor = dragControls.cursorProgress;\n            }\n        },\n        clearSnapshot: function () {\n            prevDragCursor = prevViewportBox = undefined;\n        },\n        updateLeadAndFollow: function () {\n            var _a;\n            prevState = __assign({}, state);\n            var lead;\n            var follow;\n            var order = Array.from(stack);\n            for (var i = order.length; i--; i >= 0) {\n                var element = order[i];\n                if (lead)\n                    follow !== null && follow !== void 0 ? follow : (follow = element);\n                lead !== null && lead !== void 0 ? lead : (lead = element);\n                if (lead && follow)\n                    break;\n            }\n            state.lead = lead;\n            state.follow = follow;\n            state.leadIsExiting = ((_a = state.lead) === null || _a === void 0 ? void 0 : _a.presence) === Presence.Exiting;\n            crossfader.setOptions({\n                lead: lead,\n                follow: follow,\n                prevValues: prevValues,\n                crossfadeOpacity: (follow === null || follow === void 0 ? void 0 : follow.isPresenceRoot) || (lead === null || lead === void 0 ? void 0 : lead.isPresenceRoot),\n            });\n            if (prevState.lead !== state.lead ||\n                prevState.leadIsExiting !== state.leadIsExiting) {\n                needsCrossfadeAnimation = true;\n            }\n        },\n        animate: function (child, shouldCrossfade) {\n            if (shouldCrossfade === void 0) { shouldCrossfade = false; }\n            if (child === state.lead) {\n                if (shouldCrossfade) {\n                    /**\n                     * Point a lead to itself in case it was previously pointing\n                     * to a different visual element\n                     */\n                    child.pointTo(state.lead);\n                }\n                else {\n                    child.setVisibility(true);\n                }\n                var config = {};\n                if (child.presence === Presence.Entering) {\n                    config.originBox = getFollowViewportBox();\n                }\n                else if (child.presence === Presence.Exiting) {\n                    config.targetBox = getFollowLayout();\n                }\n                if (needsCrossfadeAnimation) {\n                    needsCrossfadeAnimation = false;\n                    var transition = child.getDefaultTransition();\n                    child.presence === Presence.Entering\n                        ? crossfader.toLead(transition)\n                        : crossfader.fromLead(transition);\n                }\n                child.notifyLayoutReady(config);\n            }\n            else {\n                if (shouldCrossfade) {\n                    state.lead && child.pointTo(state.lead);\n                }\n                else {\n                    child.setVisibility(false);\n                }\n            }\n        },\n    };\n}\n\nexport { layoutStack };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}